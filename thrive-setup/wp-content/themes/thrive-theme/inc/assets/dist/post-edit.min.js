/*! Thrive Themes 2020-09-26
* http://www.thrivethemes.com/
* Copyright (c) 2020 Thrive Themes */

"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(l){var p,f,n,h,v,a={".js":[],".json":[],".css":[],".html":[]},c="function"==typeof require?require:null;return h=function(t){var e=new Error("Could not find module '"+t+"'");return e.code="MODULE_NOT_FOUND",e},v=function(t,e,i){var o,n;if("function"==typeof t[e+i])return e+i;for(o=0;n=a[i][o];++o)if("function"==typeof t[e+n])return e+n;return null},p=function(t,e,i,o,n,a){var r,s,l,c,u,d;for("."!==(r=(i=i.split("/")).pop())&&".."!==r||(i.push(r),r="");null!=(s=i.shift());)if(s&&"."!==s&&(".."===s?(t=e.pop(),a=a.slice(0,a.lastIndexOf("/"))):(e.push(t),t=t[s],a+="/"+s),!t))throw h(o);if(r&&"function"!=typeof t[r]&&((d=v(t,r,".js"))||(d=v(t,r,".json")),d||(d=v(t,r,".css")),d||(d=v(t,r,".html")),d?r=d:2!==n&&"object"===_typeof(t[r])&&(e.push(t),t=t[r],a+="/"+r,r="")),!r)return 1!==n&&t[":mainpath:"]?p(t,e,t[":mainpath:"],o,1,a):p(t,e,"index",o,2,a);if(!(u=t[r]))throw h(o);return u.hasOwnProperty("module")?u.module.exports:(l={},u.module=c={exports:l,id:a+"/"+r},u.call(l,l,c,f(t,e,a)),c.exports)},n=function(t,e,i,o){var n,a=i,r=i.charAt(0),s=0;if("/"===r){if(a=a.slice(1),!(t=l["/"])){if(c)return c(i);throw h(i)}o="/",e=[]}else if("."!==r){if(n=a.split("/",1)[0],!(t=l[n])){if(c)return c(i);throw h(i)}o=n,e=[],(a=a.slice(n.length+1))||(s=(a=t[":mainpath:"])?1:(a="index",2))}return p(t,e,a,i,s,o)},(f=function(e,i,o){return function(t){return n(e,[].concat(i),t,o)}})(l,[],"")}({workspace:{inc:{assets:{js:{admin:{models:{"media-library.js":function(t,e,i){var o=function(){function i(t){_classCallCheck(this,i);var e=void 0!==t.gallery_args?t.gallery_args:{};e=Object.assign({title:"Choose an image",button:{text:"Select"},multiple:!1,frame:"select",library:{type:"image"}},e),this.instance=wp.media(e),this.add_callbacks(t.callbacks)}return _createClass(i,[{key:"add_callbacks",value:function(e){var i=this;this.instance.on("open",function(){"function"==typeof e.on_open&&e.on_open()}),this.instance.on("select",function(){if("function"==typeof e.on_select){var t=i.instance.state().get("selection").first().toJSON();e.on_select(t)}})}},{key:"open",value:function(){this.instance.open()}},{key:"get_instance",value:function(){return this.instance}}]),i}();e.exports=o}},post:{"post-edit.js":function(t,e,i){var n,o,a=i("./validation"),r=i("../models/media-library");n=jQuery,o={init:function(){this.displayPostFormatOptions(),n(document).on("change",'select[id^="post-format-selector-"], [id^="post-format"]',this.displayPostFormatOptions).on("click",".post-format",this.displayPostFormatOptions).on("click",".thrive_meta_postformat_video_type",this.toggleContainers.bind(this,"video")).on("click",".thrive_meta_postformat_audio_type",this.toggleContainers.bind(this,"audio")).on("click","#thrive-upload-custom-video",this.openVideoMediaLibrary).on("click","#thrive-upload-custom-audio",this.openAudioMediaLibrary).on("click",".thrive-autoplay-checkbox",this.toggleInputNotice).on("blur",".thrive-url-input",this.validateURL).on("blur",".thrive-video-time-input",this.validateTime),this.videoMediaLibrary=this.initVideoMediaLibrary(),this.audioMediaLibrary=this.initAudioMediaLibrary()},displayPostFormatOptions:function(){var t="";t="undefined"!=typeof wp&&void 0!==wp.blocks?n('[id^="post-format"]').val():n(".post-format:checked").val(),n(".thrive-post-format-options").hide(),n("#thrive_post_format_options").hide(),"video"!==t&&"audio"!==t||(n("#thrive_"+t+"_post_format_options").show(),n("#thrive_post_format_options").show(),o.toggleContainers(t))},toggleInputNotice:function(){var t=n(this);t.next().find(".thrive-notice").toggle(t.is(":checked"))},toggleContainers:function(t){var e=n(".thrive_meta_postformat_"+t+"_type:checked").val();n(".thrive-"+t+"-container").each(function(){n(this).toggle(this.dataset.type===e)})},openVideoMediaLibrary:function(t){t.preventDefault(),o.videoMediaLibrary.open()},openAudioMediaLibrary:function(t){t.preventDefault(),o.audioMediaLibrary.open()},initAudioMediaLibrary:function(){return new r({gallery_args:{title:"Upload Audio",button:{text:"Select"},multiple:!1,frame:"select",library:{type:"audio"}},callbacks:{on_select:function(t){n("#thrive_meta_postformat_audio_custom_url").val(t.url)},on_open:function(){void 0===o.audioMediaLibrary.get_instance()&&console.error("Error while opening the media gallery!")}}})},initVideoMediaLibrary:function(){var t=this;return new r({gallery_args:{title:"Upload Video",button:{text:"Select"},multiple:!1,frame:"select",library:{type:"video"}},callbacks:{on_select:function(t){n("#thrive_meta_postformat_video_custom_url").val(t.url),n(".thrive-url-input").trigger("blur")},on_open:function(){void 0===t.videoMediaLibrary.get_instance()&&console.error("Error while opening the media gallery!")}}})},validateURL:function(t){var e=n(this),i=e.closest(".thrive-video-container").attr("data-type"),o=e.val();n(".thrive-url-validate").hide(),o||"custom"===i&&"thrive-upload-custom-video"===t.relatedTarget.id?"custom"!==i&&(a.validate(o,i)||e.next(".thrive-url-validate").text("Invalid URL!").show()):e.parent().find(".thrive-url-validate").text("Empty URL field!").show()},validateTime:function(){var t=n(this);t.toggleClass("thrive-invalid",!a.validateTime(t.val()))}},n(window).on("load",o.init.bind(o))},"validation.js":function(t,e,i){var o=function(){function o(){_classCallCheck(this,o)}return _createClass(o,null,[{key:"validate",value:function(t,e){var i="validate"+(e.charAt(0).toUpperCase()+e.slice(1));return"function"==typeof o[i]&&o[i](t)}},{key:"validateYoutube",value:function(t){return t.match(/^((?:https?:)?\/\/)?((?:www|m)\.)?((?:youtube\.com|youtu.be))(\/(?:[\w\-]+\?v=|embed\/|v\/)?)([\w\-]+)(\S+)?$/)}},{key:"validateVimeo",value:function(t){return t.match(/(https:\/\/|)(player.|www.)?(vimeo\.com)/)}},{key:"validateWistia",value:function(t){var e=new RegExp("https?://(.+)?(wistia.com|wi.st)/(medias|embed)/(.+)"),i=new RegExp("https?://(.+)?fast.wistia.(com|net)/embed/(.+?)/(.+)");return t.match(e)||t.match(i)}},{key:"validateTime",value:function(t){return 0<=t&&t<=60}}]),o}();e.exports=o}}}}}}}})("workspace/inc/assets/js/admin/post/post-edit");